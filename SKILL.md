---
name: academic-paper-analyzer
description: |
  将学术论文转化为微信公众号风格的深度技术文章。
  使用 MinerU Cloud API 高精度解析 PDF，自动提取图片、表格、公式。
  生成 Markdown 和 HTML 两种格式，HTML 支持 base64 嵌入图片。
---

# Academic Paper Analyzer - 学术论文转公众号文章

## 核心能力

- **MinerU Cloud API** 高精度 PDF 解析（推荐）
- 自动提取图片、表格、LaTeX 公式
- 提取论文元数据（标题、摘要、章节、图片）
- 生成自然流畅的公众号风格文章
- 输出 Markdown + HTML（base64 嵌入图片）

## 前置准备

### MinerU API Token

1. 访问 https://mineru.net 注册账号
2. 获取 API Token
3. 设置环境变量（推荐）：
   ```bash
   export MINERU_TOKEN="your_token_here"
   ```

### 依赖安装

```bash
pip install requests markdown
```

## 操作步骤

### 第一步：PDF 解析（使用 MinerU API）

```bash
python scripts/mineru_api.py <pdf_path> <output_dir>
```

或者直接传入 token：
```bash
python scripts/mineru_api.py paper.pdf ./output YOUR_TOKEN
```

**输出结果：**
- `output_dir/*.md` - Markdown 文件（含公式、表格）
- `output_dir/images/` - 高质量提取的图片

### 第二步：提取论文信息

```bash
python scripts/extract_paper_info.py <output_dir>/*.md paper_info.json
```

### 第三步：智能生成公众号文章

智能体阅读 Markdown 文件和论文信息，按以下原则生成文章：

#### 轻量模式（节省上下文）

**重要：为避免上下文膨胀，请遵循以下原则：**

1. **不要反复读取图片文件** - MinerU 已提取高质量图片，直接引用路径即可
2. **信任 paper_info.json** - 包含图片列表和元数据，无需视觉确认
3. **只看关键图** - 最多读取 1-2 张核心架构图，其余直接引用
4. **让用户验证** - 生成 HTML 后让用户自己检查图片是否正确

#### 写作风格（核心原则）

**避免：**
- 分点列表（如"1. xxx 2. xxx"）
- AI 常用词（"深入探讨"、"至关重要"、"在...领域"）
- 机械化章节标题
- LaTeX 公式语法（如 `$\mathcal{O}(1)$`）- 直接使用提取的公式图片
- 平铺直叙的技术描述

**采用：**
- 自然段落叙述，像讲故事一样
- 从直觉和问题出发，而非从技术细节开始
- 生动的比喻（如"大炮打蚊子"）
- 简单具体的例子（如"中国的首都在北京"）
- 逻辑递进的思路（从简单到复杂，从历史到现在）
- 个人见解和 PS 标注

#### 写作方法论（从视频分析提炼）

**1. 从直觉切入，不要直接讲技术**
- 错误示范："本文提出了一种基于哈希表的条件记忆模块"
- 正确示范："你有没有想过，大模型其实是没有记忆功能的？"

**2. 先讲历史背景，再讲创新**
- 介绍新技术前，先解释相关的旧技术
- 例如：讲 Engram 之前，先用大量篇幅讲清楚 N-gram 是什么
- 让读者理解"为什么需要这个创新"

**3. 用简单例子贯穿全文**
- 选一个简单的例子反复使用，让读者跟着思路走
- 例如："中国的首都在北京"这个例子可以用来解释：
  - 大模型如何"计算"出答案（概率分布）
  - N-gram 如何通过统计频率预测
  - Engram 如何通过查表快速获取

**4. 使用生动的比喻**
- "大炮打蚊子" - 形容用 GPU 计算简单的记忆查询
- "查字典 vs 背字典" - 形容查表 vs 计算
- 让抽象概念具象化

**5. 逻辑递进，层层深入**
- 1-gram → 2-gram → N-gram → Engram
- 简单问题 → 复杂问题 → 解决方案
- 让读者自然理解"为什么这样设计"

**6. 提炼核心洞见，用一句话总结**
- 找到论文最核心的思想，用简洁的话概括
- 例如："记忆归记忆，计算归计算"
- 这句话应该能让读者记住并复述

**7. 充分利用提取的图片**
- 不要只贴 1-2 张框架图
- 论文中的每张关键图都应该被讲解到
- 公式截图比 LaTeX 语法更易读
- 结果表格截图比重新排版更准确

#### 文章结构

**1. 论文信息**

```markdown
**论文标题**：xxx
**论文链接**：[arXiv](https://arxiv.org/abs/xxxx)
**作者团队**：xxx
```

**2. 直觉引入**（2-3段）
- 从一个问题或场景开始
- 让读者产生好奇心
- 引出"为什么需要这个研究"

**3. 背景知识**（3-4段）
- 解释相关的基础技术或历史方法
- 用简单例子说明
- 让读者理解现有方案的局限

**4. 核心创新**（4-5段）
- 详细讲解论文的创新点
- 每个创新点都要有图片支撑
- 用比喻和例子让抽象概念具象化
- 公式用图片展示，不用 LaTeX 语法

**5. 实验验证**（2-3段）
- 关键的实验结果图表
- 对比分析和数据解读
- 突出最亮眼的结果

**6. 深入分析**（2-3段）
- 机制分析、消融实验等
- 解释"为什么这个方法有效"
- 提供更深层次的理解

**7. 思考与展望**（1-2段）
- 提炼核心洞见
- 预测未来发展方向
- 个人观点和评价

### 第四步：输出格式（询问用户）

**默认输出 Markdown**，文章写完后询问用户是否需要其他格式：

> "文章已生成：`article.md`。需要生成 HTML 版本吗？（HTML 会嵌入图片，方便直接分享）"

**格式对比：**
| 格式 | 优势 | 适用场景 |
|------|------|----------|
| MD（默认） | 轻量、易编辑、公众号可直接导入 | 日常使用 |
| HTML | 图片嵌入、单文件分享 | 预览效果、分享给他人 |

如果用户需要 HTML：
```bash
python scripts/generate_html.py <article.md> <output.html>
```

## 资源索引

**脚本：**
- `scripts/mineru_api.py` - MinerU Cloud API 调用（推荐）
- `scripts/convert_pdf.py` - 本地转换（备选，需要 PyMuPDF）
- `scripts/extract_paper_info.py` - 提取论文元数据
- `scripts/generate_html.py` - 生成 HTML（base64 图片）

## 注意事项

- **优先使用 MinerU API**，精度最高，支持公式/表格
- **节省上下文**：不要反复读取图片，信任元数据
- 不输出分析过程，用户只看最终文章
- 避免分点列表，使用自然段落叙述
- 图片选择 3-5 张关键图表

## API 限制

- 单个文件最大 200MB
- 单个文件最多 600 页
- 支持 PDF、DOC、PPT、图片等格式
